name: Test Repository Dispatch

on:
  repository_dispatch:
    types: [update-submodule]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - name: Echo Received Event
        run: |
          echo "ðŸŽ‰ Repository Dispatch Received!"
          echo "Event Name: ${{ github.event_name }}"
          echo "Event Action: ${{ github.event.action }}"
          echo ""
          echo "## Payload Received:" 
          echo "SHA: ${{ github.event.client_payload.sha }}"
          echo "Cart Changed: ${{ github.event.client_payload.cart_changed }}"
          echo "Products Changed: ${{ github.event.client_payload.products_changed }}"
          echo "Core Changed: ${{ github.event.client_payload.core_changed }}"
          
      - name: Display in Summary
        run: |
          echo "## âœ… Dispatch Event Test Successful" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Payload SHA:** \`${{ github.event.client_payload.sha }}\`" >> $GITHUB_STEP_SUMMARY
          echo "**Cart Changed:** ${{ github.event.client_payload.cart_changed }}" >> $GITHUB_STEP_SUMMARY
          echo "**Products Changed:** ${{ github.event.client_payload.products_changed }}" >> $GITHUB_STEP_SUMMARY
